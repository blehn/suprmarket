- content_for(:head) do
  - if params[:radius]
    :javascript
      $(function() {
        $('#slider').slider('option', 'value', #{value_for_radius(params[:radius])});
        $("#slider_amount").val(slider_values[$("#slider").slider("value")]);
      })
.search_details
  /= "#{pluralize(@results.total_entries, 'result')} for \"#{h(params[:q])}\""
  
.search_filters
  - if params[:grid_view]
    .grid_view_details
      .image_size
        Image size: 
        = params[:large] ? link_to('Small', params.merge(:large => nil)) : '<strong>Small</strong>'
        = params[:large] ? '<strong>Large</strong>' : link_to('Large', params.merge(:large => 1))
      .sort
        Sort by:
        = link_to 'Date', params.merge(:sort => 'date_desc')
  .search_views
    = search_view_links
  - form_tag(search_path, :id => 'search_filter', :method => :get) do
    - params.select{ |key, value| ['q'].include?(key) }.each do |key, value|
      %input(type='hidden' name='#{key}' value='#{h(value)}')
    .other_filters
      %label
        = check_box_tag :title_only, 1, params[:title_only]
        %span Only in titles 
      %label  
        = check_box_tag :include_completed, 1, params[:include_completed]
        %span Include completed
      %label  
        = check_box_tag :has_image, 1, params[:has_image]
        %span Has photo  
      %label  
        = check_box_tag :only_new, 1, params[:only_new]
        %span Only new
      = text_field_tag :min, params[:min], :title => 'min', :class => 'input_price'
      = text_field_tag :max, params[:max], :title => 'max', :class => 'input_price'      
    #search_radius
      %span Within 
      = text_field_tag :radius, nil, :id => 'slider_amount', :readonly => 'readonly'
      #slider
    %button.btn_sm Set
= render :partial => (params[:grid_view] ? 'listings/grid' : 'listings/results'), :locals => {:city => @city, :results => @results, :favorites => @favorites}
- content_for(:footer) do
  = custom_paginate @results